<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
        integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Weather App</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@600&display=swap');

        .toggle {
            display: inline-block;
        }

        .toggle {
            position: relative;
            height: 100px;
            width: 100px;
        }

        .toggle:before {
            box-shadow: 0;
            border-radius: 84.5px;
            background: #fff;
            position: absolute;
            margin-left: -36px;
            margin-top: -36px;
            opacity: 0.2;
            height: 72px;
            width: 72px;
            left: 50%;
            top: 50%;
        }

        .toogle input:checked~.label {
            color: rgba(255, 0, 0, 0.8);
        }

        .toggle .button {
            transition: all 300ms cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 0 15px 25px -4px rgba(0, 0, 0, 0.5), inset 0 -3px 4px -1px rgba(0, 0, 0, 0.2), 0 -10px 15px -1px rgba(255, 255, 255, 0.6), inset 0 3px 4px -1px rgba(255, 255, 255, 0.2), inset 0 0 5px 1px rgba(255, 255, 255, 0.8), inset 0 20px 30px 0 rgba(255, 255, 255, 0.2);
            border-radius: 68.8px;
            position: absolute;
            background: #eaeaea;
            margin-left: -34.4px;
            margin-top: -34.4px;
            display: block;
            height: 68.8px;
            width: 68.8px;
            left: 50%;
            top: 50%;
        }

        .toggle .label {
            transition: color 300ms ease-out;
            line-height: 101px;
            text-align: center;
            position: absolute;
            font-weight: 700;
            font-size: 28px;
            display: block;
            opacity: 0.9;
            height: 100%;
            width: 100%;
            color: rgba(0, 0, 0, 0.9);
        }

        .toggle input {
            opacity: 0;
            position: absolute;
            cursor: pointer;
            z-index: 1;
            height: 100%;
            width: 100%;
            left: 0;
            top: 0;
        }

        .toggle input:active~.button {
            filter: blur(0.5px);
            box-shadow: 0 12px 25px -4px rgba(0, 0, 0, 0.4), inset 0 -8px 30px 1px rgba(255, 255, 255, 0.9), 0 -10px 15px -1px rgba(255, 255, 255, 0.6), inset 0 8px 25px 0 rgba(0, 0, 0, 0.4), inset 0 0 10px 1px rgba(255, 255, 255, 0.6);
        }

        .toggle input:active~.label {
            font-size: 26px;
            color: rgba(0, 0, 0, 0.45);
        }

        .toggle input:checked~.button {
            filter: blur(0.5px);
            box-shadow: 0 10px 25px -4px rgba(0, 0, 0, 0.4), inset 0 -8px 25px -1px rgba(255, 255, 255, 0.9), 0 -10px 15px -1px rgba(255, 255, 255, 0.6), inset 0 8px 20px 0 rgba(0, 0, 0, 0.2), inset 0 0 5px 1px rgba(255, 255, 255, 0.6);
        }

        .toggle input:checked~.label {
            color: rgba(0, 0, 0, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            font-family: 'Quicksand', sans-serif;
        }

        body {
            background-color: #f3f2ef;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            height: 100vh;
            width: 100vw;
        }

        html,
        body {
            font-size: 62.5%;
            height: 100%;
        }

        html {
            background: #eee;
        }

        .box {
            width: 20vw;
            height: 60vh;
            border-radius: 0.5rem;
            box-shadow: 0 0.2rem 3rem rgba(0, 0, 0, 0.2);
            background: #a5bbdd;
            position: relative;
            overflow: hidden;
            transform: translate3d(0, 0, 0);
            min-width: 20rem;
            min-height: 35rem;
        }

        .wave {
            opacity: 0.3;
            position: absolute;
            top: 120%;
            left: 50%;
            background: white;
            width: 50rem;
            height: 50rem;
            margin-left: -25rem;
            margin-top: -25rem;
            transform-origin: 50% 48%;
            border-radius: 43%;
            animation: drift 3000ms infinite linear;
            z-index: 1;
        }

        .wave.-three {
            animation: drift 5000ms infinite linear;
            z-index: 2 !important;
            opacity: 0.2;
        }

        .wave.-two {
            animation: drift 7000ms infinite linear;
            opacity: 0.1;
            z-index: 3 !important;
        }

        .box::after {
            content: "";
            display: block;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            transform: translate3d(0, 0, 0);
        }

        @keyframes drift {
            from {
                transform: rotate(0deg);
            }

            from {
                transform: rotate(360deg);
            }
        }

        .info {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 45%;
            z-index: 4;
        }

        .location {
            margin-top: 1.5rem;
            text-align: center;
            font-weight: 800;
            font-size: 3rem;
            font-size: 400;
        }

        .fa-street-view {
            animation: rotates 3s liner infinite alternate;
        }

        @keyframes rotates {
            from {
                transform: translateX(-0.5rem);
            }

            to {
                transform: translateX(0.5rem);
            }
        }

        #date {
            text-align: center;
            margin-top: 0.5rem;
            color: #57606f;
            font-size: 1.2rem;
            font-weight: 300;
            text-transform: uppercase;
        }

        .temp {
            margin-top: 2.5rem;
            text-align: center;
            font-size: 3rem;
        }

        .tempmin_max {
            text-align: center;
            margin-top: 0.3rem;
            font-weight: 300rem;
            font-size: 1.2rem;
            color: #57606f;
        }

        #weathericon {
            height: 55%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
        }

        #wearhericon .fas {
            font-size: 6rem;
            animation: fas-anime 3sec linear infinite alternate;
        }

        @keyframes fas-anime {
            from {
                transform: scale(0.8);
            }

            to {
                transform: scale(1.2);
            }
        }

        @media(max-width: 600px) {
            .box {
                width: 90vw;
                height: 70vh;
            }

            .wave {
                top: 85%;
            }

            #weathericon {
                font-size: 5em;
            }

            .info {
                font-size: 1.5rem;
            }

            .search-container {
                flex-direction: column;
            }
        }

        @media(max-height: 500px) {
            .box {
                height: 80vh;
            }

            .wave {
                top: 115%;
            }
        }

        body>span {
            width: 100vw;
            text-align: center;
            color: grey;
        }

        /* Additional styles for the search form */
        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            width: 100%;
            flex-wrap: wrap;
        }

        .search-box {
            display: flex;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 25px;
            padding: 5px 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 10px;
            align-items: center;
        }

        .city-input {
            background: transparent;
            border: none;
            padding: 10px;
            font-size: 1.6rem;
            width: 180px;
            outline: none;
            color: #333;
        }

        .search-button {
            background: #feca57;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all 0.3s;
            margin-left: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-button:hover {
            background: #ff9f43;
            transform: scale(1.05);
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #2c3e50;
            color: #ecf0f1;
        }

        body.dark-mode .box {
            background: #34495e;
        }

        body.dark-mode .location {
            color: #ecf0f1;
        }

        body.dark-mode #date {
            color: #bdc3c7;
        }

        body.dark-mode .tempmin_max {
            color: #bdc3c7;
        }

        body.dark-mode .search-box {
            background: rgba(52, 73, 94, 0.6);
        }

        body.dark-mode .city-input {
            color: #ecf0f1;
        }

        body.dark-mode .label {
            color: rgba(255, 255, 255, 0.9);
        }
    </style>
</head>

<body>
    <div class="search-container">
        <form id="city-form" class="search-box">
            <input class="city-input" type="text" placeholder="Enter city name" id="cityInput">
            <button class="search-button" type="submit">
                <i class="fas fa-search" style="color: #fff;"></i>
            </button>
        </form>

        <div class="toggle">
            <input type="checkbox" id="themeToggle">
            <span class="button"></span>
            <span class="label">☼</span>
        </div>
    </div>

    <div class="box">
        <div class="wave -one"></div>
        <div class="wave -two"></div>
        <div class="wave -three"></div>

        <div id="weathericon">
            <i class="fas fa-sun" style="color: #feca57;"></i>
        </div>

        <div class="info">
            <h2 class="location"><i class="fas fa-street-view" style="color: #feca57;"></i>
                {%city%}, {%country%}
            </h2>
            <p id="date">WED | OCT 26 | 10:49PM</p>
            <h1 class="temp">{%tempval%}&deg;C</h1>
            <h3 class="tempmin_max">{%tempmin%}&deg;C | {%tempmax%}&deg;C</h3>
        </div>
    </div>

    <script>
        // Get current date and time
        const curDate = document.getElementById("date");

        // Update weather icon based on weather status
        const weathericon = document.getElementById("weathericon");
        const tempStatus = "{%tempstatus%}";
        if (tempStatus == "Clear") {
            weathericon.innerHTML = '<i class="fas fa-sun" style="color: #feca57;"></i>';
        } else if (tempStatus == "Clouds") {
            weathericon.innerHTML = '<i class="fas fa-cloud" style="color: #dfe4ea;"></i>';
        } else if (tempStatus == "Rain") {
            weathericon.innerHTML = '<i class="fas fa-cloud-rain" style="color: #a4b0be;"></i>';
        } else if (tempStatus == "Snow") {
            weathericon.innerHTML = '<i class="fas fa-snowflake" style="color: #dfe4ea;"></i>';
        } else if (tempStatus == "Thunderstorm") {
            weathericon.innerHTML = '<i class="fas fa-bolt" style="color: #feca57;"></i>';
        } else if (tempStatus == "Drizzle") {
            weathericon.innerHTML = '<i class="fas fa-cloud-rain" style="color: #a4b0be;"></i>';
        } else if (tempStatus == "Mist" || tempStatus == "Fog" || tempStatus == "Haze") {
            weathericon.innerHTML = '<i class="fas fa-smog" style="color: #a4b0be;"></i>';
        } else {
            weathericon.innerHTML = '<i class="fas fa-cloud" style="color: #dfe4ea;"></i>';
        }

        // Get current day function
        const getCurrentDay = () => {
            const weekday = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const currentTime = new Date();
            return weekday[currentTime.getDay()];
        };

        // Get current time function
        const getCurrentTime = () => {
            const months = [
                "Jan", "Feb", "Mar", "Apr", "May", "Jun",
                "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
            ];
            const now = new Date();
            const month = months[now.getMonth()];
            const date = now.getDate();
            let hours = now.getHours();
            let mins = now.getMinutes();
            let periods = hours >= 12 ? "PM" : "AM";

            hours = hours > 12 ? hours - 12 : hours;
            hours = hours === 0 ? 12 : hours;
            mins = mins < 10 ? "0" + mins : mins;

            return `${month} ${date} | ${hours}:${mins}${periods}`;
        };

        // Update date and time
        curDate.innerHTML = `${getCurrentDay()} | ${getCurrentTime()}`;

        // City form submission
        document.getElementById('city-form').addEventListener('submit', function (e) {
            e.preventDefault();
            const city = document.getElementById('cityInput').value.trim();
            if (city) {
                // Keep the /Weatherapp path when redirecting
                const currentPath = window.location.pathname;
                const basePath = currentPath.includes('/Weatherapp') ? '/Weatherapp' : '/';

                window.location.href = `${basePath}?city=${encodeURIComponent(city)}`;
            }
        });

        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const savedTheme = localStorage.getItem('theme');

        // Check if user previously set a theme
        if (savedTheme === 'dark') {
            body.classList.add('dark-mode');
            themeToggle.checked = true;
            document.querySelector('.label').textContent = '☾';
        }

        themeToggle.addEventListener('change', function () {
            if (this.checked) {
                body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark');
                document.querySelector('.label').textContent = '☾';
            } else {
                body.classList.remove('dark-mode');
                localStorage.setItem('theme', 'light');
                document.querySelector('.label').textContent = '☼';
            }
        });

        // Update time every minute
        setInterval(() => {
            curDate.innerHTML = `${getCurrentDay()} | ${getCurrentTime()}`;
        }, 60000);
    </script>
</body>

</html>